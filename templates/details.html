{% extends 'base.html' %}
{% block content %}


<h1>{{ blog.title }}</h1>
<img src="{{blog.title_image.url}}" style="max-height:300px" />
<br />
<small>By: {{ blog.author.first_name }} {{ blog.author.last_name }} -
    {{ blog.published_date }} {{ blog.blog_views }} views <i class="fa fa-eye" aria-hidden="true"> </i>

</small>
<br />
<hr>
{{ blog.blog_content|safe }}
<br />

{% if user.is_authenticated %}
{% if user.id == blog.author.id %}
<a href="{% url 'update' blog.pk %}"><button>Edit</button></a>
<a href="{% url 'delete' blog.pk %}"><button style="background-color:red;">Delete</button></a>
<br /><br />
<a href="{% url 'home' %}"><button class="btn btn-primary">Home</button></a>


{% else %}
<br />

<form action="{% url 'blogpost_like' object.id %}" method="POST">
    {% csrf_token %}

    {% if post_is_liked %}
    <button type="submit" name="blogpost_id" value="{{object.id}}" class="btn btn-info">Unlike</button>
    {% else %}
    <button type="submit" name="blogpost_id" value="{{object.id}}" class="btn btn-info">Like</button>
    {% endif %}
</form>
{% endif %}
{% else %}
<a class="btn btn-outline-info" href="{% url 'home' %}">Log in to like this
    article!</a><br>
{% endif %}
<strong class="text-secondary"> {{ number_of_likes }} Like{{ number_of_likes|pluralize }}</strong>
<br /><br />
<a href="{% url 'home' %}"><button class="btn btn-primary">Home</button></a>


{% endblock %}